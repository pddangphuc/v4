title = "location"
url = "/location/:slug"
layout = "landing"
description = "This is the page for Location categories"
is_hidden = 0

[ CategoryPage]

[ CategoryList]

[ ProductList]

[ ProductData]
==
{% component 'CategoryPage' %}
{% set obCategory = CategoryPage.get() %}
<div data-id="{{ obCategory.id }}"></div>

<div>

	{% set obProductList = ProductList.make().sort(ProductList.getSorting()).active().category(obCategory.id) %}
	{% if obProductList.isNotEmpty() %}
	    <div class="product-list-wrapper" style="display: none;">
	        {% for obProduct in obProductList %}
	            <div data-id="{{ obProduct.id }}">
	                <h6>{{ obProduct.name }}</h6>
	                {% if obProduct.preview_image is not empty %}
	                    <img src="{{ obProduct.preview_image.path }}" title="{{ obProduct.preview_image.title }}" alt="{{ obProduct.preview_image.description }}">
	                {% endif %}
	                <div>{{ obProduct.preview_text }}</div>
	            </div>
	        {% endfor %}
	    </div>
	{% endif %}
</div>
{% if obCategory.preview_image is not empty %}
<div class="hero-block hero-landing" style="background-image: url('{{ obCategory.preview_image.path }}');">

<div class="hero-landing-content">
	<h1>{{ obCategory.preview_text }}</h1>
	<div class="search-bar-main search-main search-box-landing">
		<div class="container page-container p-0">
			{{ form_open({ url: '/search' }) }}
				<div class="search-block">
					<div class="search-left float-left">
						<input type="search" name="txtsearch" placeholder="Where do you want to go?" class="txtsearch" />
						<input type="text" name="txtcal" class="txtcal" id="txtcal" />
						<input type="text" name="txtguests" class="txtguests-main" id="txtguests">
					</div>
					<div class="search-right float-left">
						<input type="hidden" name="txtadults" id="txtadults" value="2" />
						<input type="hidden" name="txtchildren" id="txtchildren" />
						<button name="btnsearch" class="btn btn-primary btn-search">SEARCH</button>
					</div>
				</div>
			{{ form_close() }}
		</div>
	</div>
</div>
    <!-- <img src="{{ obCategory.preview_image.path }}" title="{{ obCategory.preview_image.title }}" alt="{{ obCategory.preview_image.description }}"> -->

</div>
{% endif %}



<div class="background-landing-popular" style="display: none;">
    <div class="container page-container p-0">
    	<div class="row">
    		<div class="col">
    			<div class="collection-landing-image">
    				<div class="carousel-title-landing">
    					<h4>Popular Regions in Victoria</h4>
    				</div>
    				{% component 'slider' slide_show_id = 5 %}
    			</div>
    		</div>
    	</div>	
    </div> 
</div>
<hr style="margin-bottom: 0px;display: none;">
<div class="background-landing-luxury">
    <div class="container page-container landing_post_content">
        <div id="search-page">
            <section class="filter-block" style="background-color: #ffffff; margin-bottom: -20px;">
                    <div class="row">
                        <div class="col landing-post-title">
                            <h2>Luxury Accommodation in {{ obCategory.name }}</h2>
                        </div>
                        <div class="col pt-1">
                          <div class="btn-group float-right filter-btn filter-block-button background-button" role="group" aria-label="Basic example">
                            <button type="button" class="btn btn-light">FILTER</button>
                            <button type="button" class="btn btn-light"><img src="{{ 'assets/images/arrow-down-small-grey@2x.png'|theme }}" style="height: 12px;" /></button>
                            <button type="button" class="btn btn-light"><img src="{{ 'assets/images/map-small-grey@2x.png'|theme }}" /></button>
                            <button type="button" class="btn btn-light"><img src="{{ 'assets/images/list-grey@2x.png'|theme }}" style="height: 10px;" /></button>
                          </div>
                        </div>
                    </div>
            </section>
        	
        	
        	<div class='row search-results-block'>
        		{# Render product list #}
			    {% for obProduct in obProductList %}
			    {% set dbProduct = ProductData.get(obProduct.id) %}
			    {% set pbProduct = ProductPage.get() %}

						<div class="col-xs-12 col-sm-4 col-md-6 col-lg-6">
							<div class="card card-height-landing" style="width:585px;margin-bottom: 20px;">
							    <div class="collection-landing-post">
							    	{# component 'slider' slide_show_id = 6 #}

							    	<div class="image-block">
										<div class="gallery owl-carousel" >
										 {# if obProduct.images.isNotEmpty() #}

								            {% for obProductImages in obProduct.images %}
								               <div class="img-block" style="background: url('{{ obProductImages.path }}');">
								               	
								               </div>
								            {% endfor %}

								          {# endif #}			
										</div>
										<!-- <div class="fav-link"><img src="{{ 'assets/images/fav@2x.png'|theme }}" /></div> -->
									</div>

							    	<i class="fa fa-heart-o hover-fa-heart" style="z-index: 1;"></i>
			                        <div class="hover-slide-pre"></div>
									<div class="hover-slide-next"></div>
							    </div>
							    
							    {% set pbPropertyList = obProduct.property %}
							    <div class="card-body" data-id="{{ obProduct.id }}">
							    	{# get details #}
								{% if pbPropertyList.isNotEmpty() == true %}
								{% set beds = "text" %}
								{% set guest = "text" %}
								{% set region = "text" %}
								{% set state = "text" %}
								{% set country = "text" %}
								{% set minaverage = "text" %}
								{% set addfees = "text" %}
								{% set addfeesnotes = "text" %}
								{% set bond = "text" %}
								{% set bondnotes = "text" %}
								{% set propertytype = "text" %}
								        <ul style="display: none;">
								            {% for pbProperty in pbPropertyList if pbProperty.hasValue() %}
								                <li data-id="{{ pbProperty.slug }} - {{ pbProperty.property_value.getValueString() }}">{{ pbProperty.name }}: {{ pbProperty.property_value.getValueString() }}</li>

								                {% if pbProperty.slug == 'totalbedrooms' %}
								                	{%  set beds = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'maximumguests' %}
								                	{%  set guest = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'region' %}
								                	{%  set region = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'state' %}
								                	{%  set state = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'country' %}
								                	{%  set country = pbProperty.property_value.getValueString() %}
								                {% endif %}

								          		{% if pbProperty.slug == 'minimumaveragerate' %}
								                	{%  set minaverage = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'additionalfees' %}
								                	{%  set addfees = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'additionalfeenotes' %}
								                	{%  set addfeesnotes = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'securitybondrequired' %}
								                	{%  set bond = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'securitybondnotes' %}
								                	{%  set bondnotes = pbProperty.property_value.getValueString() %}
								                {% endif %}

								                {% if pbProperty.slug == 'propertytype' %}
								                	{%  set propertytype = pbProperty.property_value.getValueString() %}
								                {% endif %}
			           


								            {% endfor %}
								        </ul>
								   {% endif %}

							    	<table>
							    		<tr class="landing-note">
							    			<td><li class="landing-note-house">{{ propertytype }}</li></td>
							    			<td class="dot-icon"><img src="{{ 'assets/images/bullet.png'|theme }}" /></td>
							    			<td><li class="landing-note-bedroom">{{ beds }} BEDROOM</li></td>
							    			<td class="dot-icon"><img src="{{ 'assets/images/bullet.png'|theme }}" /></td>
							    			<td><li class="landing-note-guest">{{ guest }} GUESTS</li></td>
							    		</tr>
							    	</table>
								  	<p class="landing_name"><a href="{{ '/retreat/'|app }}/{{ obProduct.slug }}">{{ obProduct.name }}</a></p>
								  	<a class="landing_address" href="#">{{ region }}, {{ state }}, {{ country }}</a>
								  	<p></p>
								  	<p></p>
								  	<p class="landing_content">{#obProduct.preview_text #} 
							{{ obProduct.preview_text|length > 110 ? obProduct.preview_text|slice(0, 110) ~ '...' : obProduct.preview_text  }}</p>
								  	<br>
								  	<p class="landing_days">Nightly Rate Total</p>
								  	<div class="pull-right"><p class="landing_cost">From AUD ${{ minaverage|number_format }}</p><span style="margin-left:2px; font-weight: 300; font-size: 10px;">plus fees</span><i class="fa fa-exclamation-circle" title="" style="margin-left:2px; font-weight:600; color: #38B1EA; " data-toggle="popover" data-content="{% partial 'site/info' fees=addfees feesnotes=addfeesnotes bonds=bond bondsnotes=bondnotes%}"></i></div>
							    </div>

							 </div>
						</div>

				{% endfor %}
        	</div>

        	<div class="row">
        		<div class="col-xs-12 col-sm-4 col-md-12 col-lg-12">
        			<p class="landing-loading"> <img class="icon-rotation" src="{{ 'assets/images/rotation.png'|theme }}" /> LOADING MORE</p>
        		</div>
        	</div>
        </div>
    </div>
</div>