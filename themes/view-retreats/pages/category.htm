title = "category"
url = "/category"
layout = "default"
is_hidden = 0

[CategoryList]

[ProductList]

[ProductData]

==


 {# Get CategoryCollection class object. Call tree() method to get category tree #}
        {% set obCategoryList = CategoryList.make().tree() %}

        {# Let's check that the list of categories is not empty #}
        {% if obCategoryList.isNotEmpty() %}
            <ul class="category-menu-wrapper">

                {# Render top level of category tree #}
                {% for obCategory in obCategoryList %}
                    <li data-id="{{ obCategory.id }}">{{ obCategory.name }}
                    
                    {# Let's check that the list of child categories is not empty #}
                    {% if obCategory.children.isNotEmpty() %}
                        <ul class="category-child-menu-wrapper">
                        
                            {# Render child categories #}
                            {% for obChildCategory in obCategory.children %}
                               <li>{{ obChildCategory.name }}</li>
                            {% endfor %}
                            </ul>
                    {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}




<h4>Product Listings</h4>

 {# Apply sorting, filter by "active" flag, filter by category ID #}
        {% set obProductList = ProductList.make().sort(ProductList.getSorting()).active() %}

        {# Let's check that the list of products is not empty #}
        {% if obProductList.isNotEmpty() %}
            <div class="product-list-wrapper">
            
                {# Render product list #}
                {% for obProduct in obProductList %}
                {% set dbProduct = ProductData.get(obProduct.id) %}
                    <div data-id="{{ obProduct.id }}">
                        <p>{{ obProduct.name }} - {{ dbProduct.category.name }}</p>
                        {% if obProduct.preview_image is not empty %}
                           <!-- <img src="{{ obProduct.preview_image.path }}" title="{{ obProduct.preview_image.title }}" alt="{{ obProduct.preview_image.description }}"> -->
                        {% endif %}
                        <div>{{ obProduct.preview_text }}</div>

                        <div>
                          <ul>
                          {# if obProduct.images.isNotEmpty() #}

                            {% for obProductImages in obProduct.images %}
                               <li>{{ obProductImages.path }}</li>
                            {% endfor %}

                          {# endif #}
                          </ul>
                        </div>

                    </div>
                {% endfor %}
            </div>
        {% endif %}

<h4>Property Items</h4>

